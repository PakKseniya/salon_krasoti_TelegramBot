<h1 align="center">Телеграм-бот

"Помощник администратора салона красоты"</h1>


<h3 align="center">
<p>Данное руководство написано с целью демонастрации функционала телеграмм-бота, и кратким описанием основных особенностей проекта.</p>
<p>Саму реализацию данного проекта можно найти в телеграмме по ссылке @salon_krasoti_bot. 
Бот будет полезен как салонам красоты, так и самозанятым мастерам маникюра, педикюра и другим и станет дополнительным каналом продаж данных услуг.</p>
</h3>

<h2>Особенности проекта</h2>

* Для запуска работы приложения, а также для безопасного хранения TOKENа используется batch-файл в котором прописаны команды для запуска приложения
  Номер токена в файле bot_run.bat не выложен на github.com из соображений безопасности.

  <img src="/PakKseniya/salon_krasoti_TelegramBot/blob/master/Screenshots/1.png?raw=true" alt="1.png">

* Сделан модуль для фильтрации и удаления нецензурных сообщений, с возможностью обновления списка слов по инструкции прилагаемой к модулю

* Возможность добавления/удаления процедур с полным описанием в базу данных администратором через телеграмм

* Работа админской части в боте написана с ипользование конечных автоматов(finite-state machine-далее FMS).FMS - это упрощенная модель компьютера имеющая конечное число состояний, 
которая жертвует всеми особенностями компьютеров такие как ОЗУ, постоянная память, устройства ввода-вывода и процессорными ядрами в обмен на простоту понимания, 
удобство рассуждения и легкость программной или аппаратной реализации.

<h2>Используемые библиотеки в проекте</h2>

- aiogram -это простой и полностью асинхронный фреймворк для Telegram Bot API, написанный на Python 3.7 с asyncio и aiohttp, помогает сделать ботов быстрее и проще
- os- для возможности чтения токена из batch-файла
- emoji-библиотека для использования эмодзи в кнопка для клиентов,с целью улучшения визуализации
- sqlite3-обладает практически всеми возможностями, которых можно ожидать от реляционной СУБД, но при этом всё хранится в единственном файле
- json-используется в данном проекте для конвертирования списка нецензурных слов из формата .txt в .json
- string-для приведения нецензурных слов из сообщений к одному типу,с целью прохождения в дальнейшем сравнительной фильтрации

<h2>Модули</h2>

bot_telegpy.py- основной файл, являющийся точкой входа бота и запуска функций для работы с Handlers
Create_bot.py- в нем создается сам экземпляр бота
cenzura.json-

<h3>Директории</h3>
*в каждой директории есть файл __init__.py- для организации пакета и удобства импортов из директории в которой находимся(Handlers, Keyboards и др.)

<h4>Handlers</h4>

- Admin.py - работа админской части в боте написана с ипользование FMS(описание подробнее выше в разделе особенности проекта). 
При работе с загрузкой данных в БД вопросы выстроены в определнном порядке и на любом этапе можно отменить вносимые данные
- Client.py - записаны функции для всех кнопок используемых в работе с клиентом
- Other.py - написан код для сравнения текста сообщения с запрещенных словами, и в случае иимеющихся таких, удаления данного сообщения

<h4>Keyboards(используются кнопки 2-х видов: ReplyKeyboardMarkup(клавиатура показывается вместо основной и не привязана ни к какому сообщению) и InlineKeyboardMarkup(привязывается к сообщению, с которым была отправлена)</h4>

- admin_kb.py и client_kb.py - создание самих кнопок и их расположение при использовании в телеграмме

<h4>data_base</h4>

- sqlite_db.py - прописана вся логика создания БД и формат внесения в нее данных

<h2>Использование</h2>

<font size="3">

1. Запуск файла bot_run.bat

<img src="C:\Users\79143\Desktop\salon\salon_bot\Screenshots\1a.png"> 

2. Если запуск пройден успешно, в окно будут выведенны данные фразы

<img src="C:\Users\79143\Desktop\salon\salon_bot\Screenshots\2.png">

3. Для живого общения между администраторами и клиентами создана группа по ссылке https://t.me/+ryDy7lLxtQU3Y2My, чтобы перейти к телеграмм боту внизу справа необходмо нажать на клавишу "/"
и выбрать /start(либо в ручную ввести в диалоговом окне /start)

<img src="C:\Users\79143\Desktop\salon\salon_bot\Screenshots\3.png">

4. В случае использования участниками общения нецензурной лексики данные сообщения удалются с оповещение о том что "Материться запрещено"

<img>

5. После автоматического ответа от телеграмм бота выбирите одну из предложенных кнопок для получения быстрого ответа(расположения, контакты, список всех процедур, прайс и т.д.)

<img>

6. В случае если нужная информация не найдена, есть возможность либо обратиться в группе к администратору либо отправить свой номер для обратного звонка(данный функцинал в процессе разработки)

<img>

7. Для перехода администратора к своей части в боте, необходимо в группе написать запрос /moderator, после чего бот предоставит скрытую панель кнопок для дальнейшей работы, а запрос в группе будет удален(во избежания доступа клиентов к админской части в приложении прописана проверка на права администратора, которые настраиваются в управлении группой)

<img>

8. Чтобы загрузить описание новой процедуры в БД, нажимается кнопка /Загрузить, после чего запускается сценарий последовательных вопросов(Загрузка фото->Название процедуры->Описание->Цена).
После введения цены, сценарий будет остановлен без оповещения администратора.

<img>

8.В случае, если при введении данных замечена ошибка и графа Цена еще не пройдена, в диалоговом окне необходимо написать /отмена, при успешном выполнении будет сообщение о прерывании процедуры

<img>

9.Если ошибка обнаружена после заполнени всех данных, с помощью кнопки /удалить выгружается вся БД с инлайн кнопками для удаления полностью данных одной процедуры

<img>

</font>



